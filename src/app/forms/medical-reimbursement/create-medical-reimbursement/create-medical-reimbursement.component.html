<ul class="breadcrumb">
  <li class="breadcrumb-item"><a routerLink="/dashboard"><i class="typcn typcn-home"></i></a></li>
  <li class="breadcrumb-item" *ngIf="!ifuserlogin"><a routerLink="/medical-reimbursement">Medical Reimbursement</a></li>
  <li class="breadcrumb-item"><a><b>Create Medical Reimbursement</b></a></li>
</ul>
<div class="col-12 grid-margin">
  <div class="card px-3 mt-2">
    <div class="card-body">
      <h4 class="card-title">Create Medical Reimbursement <span class="float-right">(*) Required</span></h4>
      <form [formGroup]="medicalForm" (ngSubmit)="onSubmit()">
        <div class="row mb-1 mt-2">

          <div class="col-md-4">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">Full Name <span>*</span></label>
              <div class="col-sm-12">
                <input type="text" class="form-control" formControlName="officerName"
                  (input)="onInput($event, 'officerName')" [value]="selectedOption"
                  [ngStyle]="{'border-bottom': (submitted && medicalForm.get('officerName')?.invalid && medicalForm.get('officerName')?.errors?.['required']) ? '1px solid red' : '1px solid #ccc'}" />
                <div class="autocomplete-items" *ngIf="showDropdown">
                  <div class="option" *ngFor="let option of filteredOptions" (click)="selectOption(option)">
                    {{ option.name }}
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-4">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">Department </label>
              <div class="col-sm-12">
                <input type="text" class="form-control" formControlName="department" readonly
                  [ngStyle]="{'border-bottom': (submitted && medicalForm.get('department')?.invalid && medicalForm.get('department')?.errors?.['required']) ? '1px solid red' : '1px solid #ccc'}" />
              </div>
            </div>
          </div>

          <div class="col-md-4">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">Designation</label>
              <div class="col-sm-12">
                <input type="text" class="form-control" formControlName="designation" readonly
                  [ngStyle]="{'border-bottom': (submitted && medicalForm.get('designation')?.invalid && medicalForm.get('designation')?.errors?.['required']) ? '1px solid red' : '1px solid #ccc'}" />
              </div>
            </div>
          </div>



          <div class="col-md-4">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">Details Of Medical Reimbursement <span>*</span></label>
              <div class="col-sm-12">
                <input type="text" class="form-control" formControlName="detailsOfMedicalReimbursement"
                  [ngStyle]="{'border-bottom': (submitted && medicalForm.get('detailsOfMedicalReimbursement')?.invalid && medicalForm.get('detailsOfMedicalReimbursement')?.errors?.['required']) ? '1px solid red' : '1px solid #ccc'}" />
              </div>
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">Total Cost <span>*</span></label>
              <div class="col-sm-12">
                <input type="number" class="form-control" formControlName="totalCostOfMedicalReimbursement"
                  [ngStyle]="{'border-bottom': (submitted && medicalForm.get('totalCostOfMedicalReimbursement')?.invalid && medicalForm.get('totalCostOfMedicalReimbursement')?.errors?.['required']) ? '1px solid red' : '1px solid #ccc'}" />
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">DME Concurrance Status<span>*</span></label>
              <div class="col-sm-12">
                <select class="form-control" formControlName="dmeConcurranceStatus"
                  [ngStyle]="{'border-bottom': (submitted && medicalForm.get('dmeConcurranceStatus')?.invalid && medicalForm.get('dmeConcurranceStatus')?.errors?.['required']) ? '1px solid red' : '1px solid #ccc'}">
                  <option value="">Select</option>
                  <option value="Received">Received</option>
                  <option value="Not Received">Not Received</option>
                </select>
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">Self / Family<span>*</span></label>
              <div class="col-sm-12">
                <select class="form-control" formControlName="selfOrFamily"
                  [ngStyle]="{'border-bottom': (submitted && medicalForm.get('selfOrFamily')?.invalid && medicalForm.get('selfOrFamily')?.errors?.['required']) ? '1px solid red' : '1px solid #ccc'}">
                  <option value="">Select</option>
                  <option value="Self">Self</option>
                  <option value="Family">Family</option>
                </select>
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">Date of the Application <span>*</span></label>
              <div class="col-sm-12">
                <input type="date" class="form-control" formControlName="dateOfApplication"
                  [ngStyle]="{'border-bottom': (submitted && medicalForm.get('dateOfApplication')?.invalid && medicalForm.get('dateOfApplication')?.errors?.['required']) ? '1px solid red' : '1px solid #ccc'}" />
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">Hospital Name <span>*</span></label>
              <div class="col-sm-12">
                <input type="text" class="form-control" formControlName="nameOfTheHospital"
                  [ngStyle]="{'border-bottom': (submitted && medicalForm.get('nameOfTheHospital')?.invalid && medicalForm.get('nameOfTheHospital')?.errors?.['required']) ? '1px solid red' : '1px solid #ccc'}" />
              </div>
            </div>
          </div>


          <div class="col-md-3">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">Treatment Taken For <span>*</span></label>
              <div class="col-sm-12">
                <input type="text" class="form-control" formControlName="treatmentTakenFor"
                  [ngStyle]="{'border-bottom': (submitted && medicalForm.get('treatmentTakenFor')?.invalid && medicalForm.get('treatmentTakenFor')?.errors?.['required']) ? '1px solid red' : '1px solid #ccc'}" />
              </div>
            </div>
          </div>

          <div class="sub-title float-left w-100  mx-2 my-2">Order Info</div>
          <div class="col-md-2">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">Order Type <span>*</span></label>
              <div class="col-sm-12">
                <select class="form-control" formControlName="orderType"
                  [ngStyle]="{'border-bottom': (submitted && medicalForm.get('orderType')?.invalid && medicalForm.get('orderType')?.errors?.['required']) ? '1px solid red' : '1px solid #ccc'}">
                  <option value="">Select</option>
                  <option *ngFor="let orderTypeData of orderType" [value]="orderTypeData.value">{{orderTypeData.label}}
                  </option>
                </select>
              </div>
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">Order No <span>*</span></label>
              <div class="col-sm-12">
                <input type="text" maxlength="4" class="form-control" formControlName="orderNo"
                  (keydown)="onKeyDown($event)"
                  [ngStyle]="{'border-bottom': (submitted && medicalForm.get('orderNo')?.invalid && medicalForm.get('orderNo')?.errors?.['required']) ? '1px solid red' : '1px solid #ccc'}">
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">Order For <span>*</span></label>
              <div class="col-sm-12">
                <select class="form-control" formControlName="orderFor"
                  [ngStyle]="{'border-bottom': (submitted && medicalForm.get('orderFor')?.invalid && medicalForm.get('orderFor')?.errors?.['required']) ? '1px solid red' : '1px solid #ccc'}">
                  <option value="" selected>Select</option>
                  <option *ngFor="let orderForData of orderFor" [value]="orderForData.value">
                    {{ orderForData.label }}
                  </option>
                </select>
              </div>
            </div>
          </div>


          <div class="col-md-2">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">Date of Order <span>*</span></label>
              <div class="col-sm-12">
                <input type="date" class="form-control" formControlName="dateOfOrder"
                  [ngStyle]="{'border-bottom': (submitted && medicalForm.get('dateOfOrder')?.invalid && medicalForm.get('dateOfOrder')?.errors?.['required']) ? '1px solid red' : '1px solid #ccc'}" />
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">Order File <span>*</span></label>
              <div class="col-sm-12">
                <input type="file" class="form-control pl-0" accept=".pdf" formControlName="orderFile"
                  style="border: none;" (change)="onFileSelected($event,'order')" required>
              </div>
              <div *ngIf="medicalForm.get('orderFile')?.errors?.['maxSize']" style="font-size: 13px; color: red;"
                class="pl-2">File size exceeds 5MB</div>
              <div *ngIf="medicalForm.get('orderFile')?.errors?.['incorrectFileType']">Only PDF files are allowed</div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">Discharge Summary Endorsed<span>*</span></label>
              <div class="col-sm-12">
                <select class="form-control" formControlName="dischargeSummaryEndorsed"
                  [ngStyle]="{'border-bottom': (submitted && medicalForm.get('dischargeSummaryEndorsed')?.invalid && medicalForm.get('dischargeSummaryEndorsed')?.errors?.['required']) ? '1px solid red' : '1px solid #ccc'}">
                  <option value="">Select</option>
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                  <option value="others">Others(Tests Taken, etc)</option>
                </select>
              </div>
            </div>
          </div>

          <div class="col-md-3" *ngIf="showDischargeFile">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">Discharge File <span>*</span></label>
              <div class="col-sm-12">
                <input type="file" class="form-control pl-0" accept=".pdf" formControlName="dischargeOrTestFile"
                  style="border: none;" (change)="onFileSelected($event,'discharge')" required>
              </div>
              <div *ngIf="medicalForm.get('dischargeOrTestFile')?.errors?.['maxSize']" style="font-size: 13px; color: red;"
                class="pl-2">File size exceeds 5MB</div>
              <div *ngIf="medicalForm.get('dischargeOrTestFile')?.errors?.['incorrectFileType']">Only PDF files are allowed</div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group row">
              <label class="col-sm-12 col-form-label">Remarks</label>
              <div class="col-sm-12">
                <input type="text" class="form-control" formControlName="remarks" />
              </div>
            </div>
          </div>

          <div class="mt-3 float-left w-100 ml-2">
            <button type="submit" class="btn btn-primary mr-2">Submit</button>
            <button type="reset" class="btn btn-light">Cancel</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>